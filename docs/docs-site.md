# Documentation Site

The documentation site is built using static site generator [Astro](https://astro.build/) and [Tailwind CSS](https://tailwindcss.com/).

When there is a change on the `./BenchPress/Helpers/BenchPress.Azure/` folder,
[ci-publish-docs-branch.yml](../.github/workflows/ci-publish-docs-branch.yml) _GitHub Action_ will run and publish the
documentation site to the `docs` branch.

After the [ci-publish-docs-branch.yml](../.github/workflows/ci-publish-docs-branch.yml) _GitHub Action_ ran and publish
the documentation site to the `docs` branch, the
[cd-publish-docs-branch.yml](../.github/workflows/cd-publish-docs-branch.yml) _GitHub Action_ will run compile the
Astro project, and, publish the documentation site to GitHub Pages.

## Steps ([ci-publish-docs-branch.yml](../.github/workflows/ci-publish-docs-branch.yml))

- Install PlatyPS module
- Checkout to docs branch
- Import Benchpress.Azure module
- Import PlatyPS module
- Generate Markdown files based on the comments in the BenchPress.Azure module functions
- Format Markdown files using [generate-docs-workflow.psm1](.github/scripts/generate-docs-workflow.psm1) script
  - Add frontmatter to the Markdown files, so Astro can use it to generate the documentation site, such as,
  layout, title, module, version, updatedOn, etc.
  - Remove escape characters (\\) from (` , [ and ]) characters
  - Ensure the code in the `SYNTAX` section has correct syntax highlighting (`powershell`)
- Commit and push changes to docs branch
- Signal `ci-publish-docs-branch` event, so the
[cd-publish-docs-branch.yml](../.github/workflows/cd-publish-docs-branch.yml) _GitHub Action_ will kick in

## Steps ([cd-publish-docs-branch.yml](../.github/workflows/cd-publish-docs-branch.yml))

- Copy `docs/helpers/` folder content to `docs-site/src/pages/docs` folder, so Astro can access the autogenerated
Markdown files
- Setup Node.js
- Configure GitHub Pages for the repository
- Install dependencies for the Astro project
- Build the Astro project
- Deploy the Astro project to GitHub Pages
